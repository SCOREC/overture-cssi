#
#  Regression tests for cgmx 
# 
# Example: To run one check:
#    check.p twoSquaresInterfaceGDM22r
#    check.p twoBoxesInterface32r
#
# Here is the executable:
CGBUILDPREFIX/mx/bin/cgmx
# here is the name of the check file
mx.check
# Here is a list of command files to run for tests
sqtz
sqtz4
cictz   # cic, TZ, fourth-order
cic.planeWaveBC
boxtz
cyleigen
#
curvedInterface     # two materials - dielectric cylinder: 
# 
### twoBoxInterface.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order4 -eps2=.25 -tf=.2 -tp=.1 -ic=tz -bc=d -diss=0. -left=leftBox -right=rightBox -debug=1 -degreex=4 -degreet=4 -go=go
#
# dielectric sphere tests:
#
dielectricSphereFD22.check ../runs/dielectricCyl/dielectricCyl.cmd -cyl=0 -g=solidSphereInABoxe2.order2 -kx=1 -eps1=.25 -eps2=1.0 -method=fd -tp=.01 -tf=.01 -go=go 
# -- Dec 7, 2019 -- remove sosup tests -- I don't think we will use it anymore 
# no-sosup dielectricSphereSosup22.check ../runs/dielectricCyl/dielectricCyl.cmd -cyl=0 -g=solidSphereInABoxe2.order2 -kx=1 -eps1=.25 -eps2=1.0 -method=sosup -tp=.01 -tf=.01 -go=go
#
# Increase TCR bound for now: (fix me)
dielectricSphereFD44.check ../runs/dielectricCyl/dielectricCyl.cmd -cyl=0 -g=solidSphereInABoxe2.order4.ng3 -kx=1 -eps1=.25 -eps2=1.0 -method=fd -tp=.01 -tf=.01 -tallCellRatioBound=1.35 -go=go
#
# no-sosup dielectricSphereSosup44.check ../runs/dielectricCyl/dielectricCyl.cmd -cyl=0 -g=solidSphereInABoxe2.order4.ng3 -kx=1 -eps1=.25 -eps2=1.0 -method=sosup -tp=.01 -tf=.01 -go=go
#
# More sosup tests: 
#
# no-sosup sq4sosup.check ../runs/tz/tz.cmd -g=square20.order4.ng3 -degreex=3 -degreet=3 -method=sosup -tf=.1 -tp=.1 -bc=d -go=go
# turn off order 6 test for now since we no-longer compile this
# sq6sosup.check ../runs/tz/tz.cmd -g=square20.order6.ng4 -degreex=5 -degreet=5 -method=sosup -tf=.1 -tp=.1 -bc=d -go=go
#
# user defined forcing and user defined known solution
userDefined.check ../cmd/userDefinedKnownSolution.cmd -g=square16.order4 -beta=60 -rbc=dirichlet -diss=1.0 -tf=.1 -tp=.1 -useNewForcingMethod=1 -go=go
#
# Sosup dissipation tests 
# 
#  2D rectangular non-conservative
sq2Dorder2rSD.check ../runs/tz/tz.cmd -g=square20.order2 -degreex=2 -degreet=2 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=0 -bc=d -tp=.02 -tf=.02 -go=go
sq2Dorder4rSD.check ../runs/tz/tz.cmd -g=square20.order4.ng3 -degreex=4 -degreet=4 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=0 -bc=d -tp=.02 -tf=.02 -go=go
#  2D Curvilinear non-conservative
sq2Dorder2cSD.check ../runs/tz/tz.cmd -g=nonSquare20.order2 -degreex=2 -degreet=2 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=0 -bc=d -tp=.02 -tf=.02 -go=go
sq2Dorder4cSD.check ../runs/tz/tz.cmd -g=nonSquare20.order4.ng3 -degreex=4 -degreet=4 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=0 -bc=d -tp=.02 -tf=.02 -go=go
# 2D Curvilinear conservative
sq2Dorder2cConsSD.check ../runs/tz/tz.cmd -g=nonSquare20.order2 -degreex=2 -degreet=2 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=1 -bc=d -tp=.02 -tf=.02 -go=go
sq2Dorder4cConsSD.check ../runs/tz/tz.cmd -g=nonSquare20.order4.ng3 -degreex=4 -degreet=4 -useSosupDiss=1 -sosupDissipationOption=1 -sosupParameter=1 -diss=0 -method=nfdtd -cons=1 -bc=d -tp=.02 -tf=.02 -go=go
# 3D Sosup dissipation tests
nonBoxtzSD #upwind dissipation, curvilinear routines
nonBoxtzSDCons #upwind dissipation, curvilinear routines, conservative routines
boxtzSD    #upwind dissipation, cartesian routines
boxtzSDCons    #upwind dissipation, cartesian routines, conservative routines
# 
# GDM tests
#
sqOrder2GDM.check ../runs/planeWave/planeWave.cmd -g=square20.order2 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
sqOrder4GDM.check ../runs/planeWave/planeWave.cmd -g=square20.order4.ng3 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
nonSqOrder2GDM.check ../runs/planeWave/planeWave.cmd -g=nonSquare20.order2 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
nonSqOrder4GDM.check ../runs/planeWave/planeWave.cmd -g=nonSquare20.order4.ng3 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
#
boxOrder2GDM.check ../runs/planeWave/planeWave.cmd -g=box1.order2 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
boxOrder4GDM.check ../runs/planeWave/planeWave.cmd -g=box1.order4.ng3 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
nonBoxOrder2GDM.check ../runs/planeWave/planeWave.cmd -g=nonBox1.order2 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
nonBoxOrder4GDM.check ../runs/planeWave/planeWave.cmd -g=nonBox1.order4.ng3 -useSosupDissipation=1 -cons=0 -dm=gdm -npv=1 -a0=1 1 -a1=0 0 -b0=1 0 -b1=0 0  -kx=2 -tp=.1 -tf=.1 -go=go
#
# BAMX tests
#
baPlaneWaveAir.check ../runs/planeWave/planeWave.cmd -g=square20.order4.ng3 -kx=1 -ky=1 -method=bamx -ts=rk4 -matFile=../runs/materials/baAir.txt -tf=.2 -tp=.2 -solveForAllFields=1 -diss=1 -go=go 
# 
baPlaneWaveAirBox.check ../runs/planeWave/planeWave.cmd -g=box1.order4.ng3 -kx=1 -ky=1 -method=bamx -ts=rk4 -matFile=../runs/materials/baAir.txt -tf=.2 -tp=.2 -solveForAllFields=1 -diss=1 -go=go 
#
baPlaneWaveGDM.check ../runs/planeWave/planeWave.cmd -g=square20.order4.ng3 -kx=1 -ky=1 -method=bamx -dm=gdm -drOption=computeWaveNumber -ts=rk4 -matFile=../runs/materials/baMatGDMgenND.txt -tf=.2 -tp=.2 -solveForAllFields=1 -diss=1 -go=go
#
baScatTwoMat.check ../runs/ba/baScat.cmd -g=square20.order4.ng3 -method=bamx -dm=gdm -npv=1 -numMatRegions=2 -regionFile=../runs/ba/boxRegion.h -matFile=../runs/materials/baIsoEps2.txt -matFile2=../runs/materials/baMatGDM.txt -ts=rk4 -ic=gp -x0=.6 -beta=200 -solveForAllFields=1 -tp=.2 -tf=.2 -diss=1 -go=go
# 
baScatTwoMatBox.check ../runs/ba/baScat.cmd -g=box1.order4.ng3 -method=bamx -dm=gdm -npv=1 -numMatRegions=2 -regionFile=../runs/ba/boxRegion.h -matFile=../runs/materials/baIsoEps2.txt -matFile2=../runs/materials/baMatGDM.txt -ts=rk4 -ic=gp -x0=.6 -beta=200 -solveForAllFields=1 -tp=.2 -tf=.2 -diss=1 -go=go
#
#
# --------------- 2D INTERFACES -------------------
#
# 2D, Order 2, rectangular
twoSquaresInterface22r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order2 -eps2=2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 2D, Order 2, curvilinear
twoSquaresInterface22c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order2 -eps2=3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 2D, Order 2, curvilinear, PMI solution
twoSquaresInterfacePMI22c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order2 -eps2=3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -eps2=3 -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# 2D, Order 4, rectangular
twoSquaresInterface24r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order4.ng3 -eps2=4 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
#
# 2D, Order 4, curvilinear
twoSquaresInterface24c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order4.ng3 -eps2=2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
# 
# 2D, Order 4, curvilinear, PMI solution 
twoSquaresInterfacePMI24c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee2.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -eps2=3 -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# -------------- 2D GDM  INTERFACES ------------------
#
# 2D, Order 2, rectangular, GDM 
twoSquaresInterfaceGDM22r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -modeGDM=-1 -go=go
#
# 2D, Order 2, curvilinear, GDM 
twoSquaresInterfaceGDM22c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -modeGDM=-1 -go=go
#
# 2D, Order 2, curvilinear, GDM, PMI solution  
twoSquaresInterfaceGDMPMI22c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -modeGDM=-1 -go=go
#
# 2D, Order 4, rectangular, GDM 
twoSquaresInterfaceGDM24r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -modeGDM=-1 -go=go
#
# 2D, Order 4, curvilinear, GDM 
twoSquaresInterfaceGDM24c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -modeGDM=-1 -go=go
#
# 2D, Order 4, curvilinear, GDM, PMI solution 
twoSquaresInterfaceGDMPMI24c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee2.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# -------------- 2D MLA  INTERFACES ------------------
#
# 2D, Order 2, rectangular, MLA
twoSquaresInterfaceMLA22r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla  -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 2D, Order 2, curvilinear, MLA 
twoSquaresInterfaceMLA22c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla  -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 2D, Order 4, rectangular, MLA 
twoSquaresInterfaceMLA24r.check ../runs/interface/interface.cmd -g=twoSquaresInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
#
# 2D, Order 4, curvilinear, MLA 
twoSquaresInterfaceMLA24c.check ../runs/interface/interface.cmd -g=twoNonSquaresInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
#
# --------------------------------------------------
# --------------- 3D  INTERFACES -------------------
# --------------------------------------------------
#
# 3D, Order 2, rectangular
twoBoxesInterface32r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order2 -eps2=2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 3D, Order 2, curvilinear
twoBoxesInterface32c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order2 -eps2=2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 3D, Order 2, curvilinear, PMI solution
twoBoxesInterfacePMI22c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order2 -eps2=3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -eps2=3 -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# 3D, Order 4, rectangular
twoBoxesInterface34r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order4.ng3 -eps2=4 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
#
# 3D, Order 4, curvilinear
twoBoxesInterface34c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order4.ng3 -eps2=2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
# 
# 3D, Order 4, curvilinear, PMI solution 
twoBoxesInterfacePMI34c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee2.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -eps2=3 -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# -------------- 3D GDM  INTERFACES ------------------
#
# 3D, Order 2, rectangular, GDM 
twoBoxesInterfaceGDM32r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -modeGDM=-1 -go=go
#
# 3D, Order 2, curvilinear, GDM 
twoBoxesInterfaceGDM32c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -modeGDM=-1 -go=go
#
# 3D, Order 2, curvilinear, GDM, PMI solution  
twoBoxesInterfaceGDMPMI32c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -modeGDM=-1 -go=go
#
# 3D, Order 4, rectangular, GDM 
twoBoxesInterfaceGDM34r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -modeGDM=-1 -go=go
#
# 3D, Order 4, curvilinear, GDM 
twoBoxesInterfaceGDM34c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -modeGDM=-1 -go=go
#
# 3D, Order 4, curvilinear, GDM, PMI solution 
twoBoxesInterfaceGDMPMI34c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee2.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm  -matFile1=../runs/materials/baIsoGDM1.txt -matFile2=../runs/materials/baIsoGDM4.txt -ic=pmic -modeGDM=-1 -kx=1 -ky=.5 -go=go
#
# -------------- 3D MLA  INTERFACES ------------------
#
# 3D, Order 2, rectangular, MLA 
twoBoxesInterfaceMLA32r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 3D, Order 2, curvilinear, MLA 
twoBoxesInterfaceMLA32c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order2 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=2 -degreet=2 -go=go
#
# 3D, Order 4, rectangular, MLA 
twoBoxesInterfaceMLA34r.check ../runs/interface/interface.cmd -g=twoBoxesInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
#
# 3D, Order 4, curvilinear, MLA 
twoBoxesInterfaceMLA34c.check ../runs/interface/interface.cmd -g=twoNonBoxesInterfacee1.order4.ng3 -tf=.2 -tp=.2 -bc=d -useSosupDissipation=1 -debug=0 -dm=gdm -nm=mla -matFile1=../runs/materials/mlaMat2.txt -matFile2=../runs/materials/mlaMat3.txt -tz=poly -ic=tz -degreex=4 -degreet=4 -go=go
