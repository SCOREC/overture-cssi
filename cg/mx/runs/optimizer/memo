cd /Users/henshaw/runs/mx/optimizer




****************************************
**** June 20-21, 2018

--------- NON SYMMETRIC GRIDS 

plotStuff plotGrid -show=tgns7e8.order2.hdf -name=tgns7
plotStuff plotGrid -show=tgns6e8.order2.hdf -name=tgns6
plotStuff plotGrid -show=tgns5e16.order2.hdf -name=tgns5
plotStuff plotGrid -show=tgns4e16.order2.hdf -name=tgns4  * hole *
plotStuff plotGrid -show=tgns3e16.order2.hdf -name=tgns3
plotStuff plotGrid -show=tgns2e16.order2.hdf -name=tgns2
plotStuff plotGrid -show=tgns1e16.order2.hdf -name=tgns1


ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case7.h -prefix=tgns7 -interp=e -factor=8
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case6.h -prefix=tgns6 -interp=e -factor=8
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case5.h -prefix=tgns5 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case4.h -prefix=tgns4 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case3.h -prefix=tgns3 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case2.h -prefix=tgns2 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsNonSymN99Case1.h -prefix=tgns1 -interp=e -factor=16


------- SYMMETRIC GRIDS --------------

plotStuff plotGrid -show=tgs7e8.order2.hdf -name=tgs7
plotStuff plotGrid -show=tgs6e8.order2.hdf -name=tgs6 *
plotStuff plotGrid -show=tgs5e16.order2.hdf -name=tgs5 *
plotStuff plotGrid -show=tgs4e32.order2.hdf -name=tgs4
plotStuff plotGrid -show=tgs3e32.order2.hdf -name=tgs3  *hole*
plotStuff plotGrid -show=tgs2e16.order2.hdf -name=tgs2  **
plotStuff plotGrid -show=tgs1e16.order2.hdf -name=tgs1


ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case7.h -prefix=tgs7 -interp=e -factor=8
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case6.h -prefix=tgs6 -interp=e -factor=8
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case5.h -prefix=tgs5 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case4.h -prefix=tgs4 -interp=e -factor=32
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case3.h -prefix=tgs3 -interp=e -factor=32
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case2.h -prefix=tgs2 -interp=e -factor=16
ogen -noplot topologyGrid -curveFile=curvesFromNurbsSymN99Case1.h -prefix=tgs1 -interp=e -factor=16

****************************************
**** May 23-25, 2018

plotStuff plotGrid -show=tg1e32.order2.hdf -name=tg1
plotStuff plotGrid -show=tg2e8.order2.hdf -name=tg2
plotStuff plotGrid -show=tg5e64.order2.hdf -name=tg5
plotStuff plotGrid -show=tgppe8.order2.hdf -name=tgPuzzlePiece

Topology shapes

ogen -noplot topologyGrid -curveFile=curvesFromNurbs1.h -prefix=tg1 -interp=e -factor=32
ogen -noplot topologyGrid -curveFile=curvesFromNurbs2.h -prefix=tg2 -interp=e -factor=8
ogen -noplot topologyGrid -curveFile=curvesFromNurbs3.h -prefix=tg3 -interp=e -factor=8  *trouble with curve orientation
ogen -noplot topologyGrid -curveFile=curvesFromNurbs4.h -prefix=tg4 -interp=e -factor=8 *trouble with curve orientation
ogen -noplot topologyGrid -curveFile=curvesFromNurbs5.h -prefix=tg5 -interp=e -factor=64 (sharp corner)

ogen -noplot topologyGrid -curveFile=curvesFromNurbsPuzzlePiece.h -prefix=tgpp -interp=e -factor=8

ogen -noplot topologyGrid -curveFile=curvesFromNurbs6.h -prefix=tg6 -interp=e -factor=8


ogen -noplot topologyGrid -curveFile=curvesFromNurbs.h -interp=e -factor=8



****************************************
**** May 18, 2018

Start on constructing grids from the level curves of a Nurbs surface 



****************************************
**** Nov 25, 2017


optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=0 -plotGrid=0 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05 -x0=-.1

Try changing control points on both faces 
optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=0 -plotGrid=1 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05 -x0=-.1

****************************************
**** Nov 24, 2017

Moved optimized files to cg/mx/runs/optimizer


RUN: "quiet" run -- change STARTING GUESS 
optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=0 -plotGrid=0 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05 -x0=-.2



RUN: "quiet" run
optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=0 -plotGrid=0 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05


RUN: plot grids 
optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=3 -plotGrid=1 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05

TARGET RUN
cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=5. -tp=.5 -xb=-1. -probeFileName=TargetLens -show=lensG4.show -go=go >! lensG4.out


****************************************
**** Nov 23, 2017

optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=3 -plotGrid=1 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05

plotStuff plotSolution -show=lensG4.show

****************************************
**** Nov 22, 2017


optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=5 -infoLevel=3 -plotGrid=1 -plotSolution=0 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.001 -tolX=.05

TARGET RUN
cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=5. -tp=.5 -xb=-1. -probeFileName=TargetLens -show=lensG4.show -go=go >! lensG4.out 


****************************************
**** Nov 21, 2017

ADD OBJECTIVES: Target objective file 


TEST fminsearch -- optimized the right control point so we get a target solution (pre-computed)
optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=4 -infoLevel=3 -plotGrid=0 -plotSolution=1 -method=fminsearch -objective=targetTransmission -targetFile=TargetLens.dat -tolFun=.005 -tolX=.005


optimizer -caseName=lens -probeType=transmission -kx=2 -eps1=4 -tf=4 -infoLevel=3 -plotGrid=0 -plotSolution=1 -method=fake -objective=targetTransmission -targetFile=TargetLens.dat

optimizer -caseName=lens -probeType=transmission -kx=2 -tf=4 -infoLevel=3 -plotGrid=0 -plotSolution=1 -method=fake


optimizer -caseName=lens -probeType=point -tf=2 -infoLevel=3 -plotGrid=1 -plotSolution=1 -method=fake

cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=5 -tp=.1 -xb=-1. -probeFileName=TargetLens -go=og

****************************************
**** Nov 20, 2017

optimizer -caseName=lens -probeType=point -tf=2 -infoLevel=3 -plotGrid=1 -method=fake

****************************************
**** Nov 19, 2017


optimizer -caseName=lens -probeType=point -tf=2 -infoLevel=3 -plotGrid=1 -method=fake



cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=15 -tp=.1 -xb=-1. -go=og

Grid: -- see Makefile 
ogen -noplot curvedBlockGrid2d -prefix=convexBlockGrid -order=4 -interp=e -width=.5 -interfaceGridWidth=.4 -dxLeft=0 0 0 -.2 0 0 0 -dxRight=0 0 0 .1 0 0 0  -factor=4


****************************************
**** Nov 18, 2017

Start looking at the lens optimization

NOTE -- There is an issue with changing the control points -- I don't think the curve is reparametertized **CHECK**


"convex" lens: 
cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=15 -tp=.1 -xb=-1. -go=og

Grid: -- see Makefile 
ogen curvedBlockGrid2d -prefix=convexBlockGrid -order=4 -interp=e -width=.5 -interfaceGridWidth=.4 -dxLeft=0 0 0 -.2 0 0 0 -dxRight=0 0 0 .1 0 0 0  -factor=2

ogen curvedBlockGrid2d -prefix=convexBlockGrid -order=4 -interp=e -width=.5 -deltaLeft=-.075 -deltaRight=.075 -factor=2


****************************************
**** Sept 19, 2017

TEST CHANGING BLOCK WIDTH

BLOCKWIDTH USE FMINSEARCH: : 
optimizer -caseName=blockWidth -probeType=transmission -tf=10 -infoLevel=0 -method=fminsearch

BLOCKWIDTH: 
optimizer -caseName=blockWidth -probeType=transmission -tf=10 -infoLevel=0 -method=fake


USE FMINSEARCH: 
optimizer -caseName=block -probeType=transmission -tf=10 -infoLevel=0 -method=fminsearch



FIX BUG WITH Refection probe -- incident wave is wrong for kx!=1


cgmx -noplot dielectricBodies -g=dielectricBlockGrid2de4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=1 -eps2=1. -diss=2 -tf=15 -tp=.1 -go=og

****************************************
**** Sept 17, 2017


CURVED DIELECTRIC BLOCK 


USE FMINSEARCH: 
optimizer -caseName=block -probeType=transmission -tf=10 -infoLevel=0 -method=fminsearch


optimizer -caseName=block -probeType=transmission -tf=5



Scatter from a dielectric block
optimizer -caseName=block

Scattering from a cylinder: 
optimizer -caseName=cyl


"convex" lens: 
cgmx -noplot dielectricBodies -g=convexBlockGride4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=2 -eps1=4 -eps2=1. -diss=2 -tf=15 -tp=.1 -xb=-1. -go=og

SINGLE BLOCK:
cgmx -noplot dielectricBodies -g=dielectricBlockGrid2de4.order4 -backGround=leftBackGround -rbc=rbcNonLocal -kx=1 -eps1=8 -eps2=1. -diss=2 -tf=15 -tp=.1 -go=og

****************************************
**** Sept 16, 2017


START ON OPTIMZER


cgmx -noplot dielectricBodies -g=diskInBoxYpe4.order2.hdf -backGround=outerSquare -rbc=rbcNonLocal -kx=.5 -eps1=8 -eps2=1. -diss=2 -tf=30 -tp=.1 -xLeftProbe=-5.2 -yLeftProbe=.0 -xRightProbe=5.1  -yRightProbe=.0 -xar=-5. -xbr=-4 -xat=4 -xbt=5. -xb=-2 -show="DibG4Eps8K0p25.show" -probeFileName=probeDibG4Eps8K0p25 -go=og 

cgmx -noplot dielectricBodies -g=diskInBoxYpe4.order2.hdf -backGround=outerSquare -rbc=rbcNonLocal -kx=.25 -eps1=8 -eps2=1. -diss=2 -tf=30 -tp=.1 -xLeftProbe=-5.2 -yLeftProbe=.0 -xRightProbe=5.1  -yRightProbe=.0 -xar=-5. -xbr=-4 -xat=4 -xbt=5. -xb=-2 -show="DibG4Eps8K0p25.show" -probeFileName=probeDibG4Eps8K0p25 -go=go >! DibG4Eps8K0p25.out 



cgmx cic.planeWaveBC -g=cice4.order4.hdf tf=10 -tp=.1
